## 面向人脸识别场景的深度学习模型测试技术过程分析报告

### 图片预处理阶段



### 训练模型代码设计



### 测试工具代码设计

#### 工具代码设计流程

1. 构建加载模型、测试模型的方法 test_model，获取测试结果
2. 构建处理文件名、获取标准答案的方法
3. 构建对比测试结果和答案，并计算准确率的方法
4. 构建格式化输出方法

#### 问题 & 思路

**问题1：如何获取测试数据集的标准答案？**

**思路**：测试数据集分两类图片，一种是应当被识别出对应人名的图片，另一种是“not find”即应该无法识别出人名的图片。凭借这一点，将第一种图片的名称规范化，并在 test_tool 中写一个读取并处理图片名称的方法，从而获取图片对应人名或“not find”

**问题2：当模型预测结果对应的概率较低时，得到的通常都是错误结果，如何尽可能提高准确率？**

**思路**：向 test_model 方法传入一个测试阈值变量，低于这个阈值的结果全部筛选掉，设置为“not_find”（无法识别）

**问题3：依据概率对预测结果进行筛选，会对准确率的计算结果产生较大影响，难以尽可能准确、全面地分析模型**

**思路**：在 “test_model 记录测试结果”和“准确率计算”两处分别设置概率阈值，进行筛选。在前者处筛选，可以将模型预测概率较低的内容筛选掉，可以排除模型的低质量预测结果、提高准确率；在后者处筛选，可以判断模型对两种图片的预测能力。



### 结果分析设计

在结果分析阶段，我们在跑一开始准备的由105个人的大头照组成的数据集时，遇到了比较严重的问题，就是用数据集测试的概率过低只有20%。

一开始我们决定提高训练轮数，但我们把轮数提高后，发现训练命中率明明很高了但是测试命中率的提高几乎微乎其微。

我们查阅相关资料发现，我们设计的模型出现了过拟合的情况。

我们便着手开始准备解决过拟合问题，尝试过如下操作：

1.给原有的CNN模型添加Dropingout层

2.修改原有的数据集，保持每个人物的图片数大体一致

3.调整模型的optimizer和loss

4.调试出适宜的训练轮数

经过以上方法的改良后，过拟合的情况得到有效的改善，但测试命中率提升仍然不明显。

我们开始思考是否是建立的keras模型本身的问题导致其无法处理过多的人物，我们便考虑缩减测试集模型的人物个数，测试命中率得到了有效的改善（具体详见结果分析）。